---
title: 菜谱制作及上传软件教程
date: 2020年9月10日14:58:24
tags: Internal software
author：WuRendi
---
# 菜谱制作及上传软件教程
[TOC]
## 菜谱制作流程

说明：菜谱制作功能是通过引导界面依次输入数据并最终生成菜谱bin文件来实现的。
1. 点击软件中的`菜谱制作`按钮

2. 依次输入菜谱中的各种信息，注意点：
	1. 菜谱ID唯一
   2. 运行总时间务必确认正确（涉及UI中的倒计时功能）
   3. 主料种类、调料步骤、状态步骤要确认无误（会影响之后的引导界面控件的可用性，也是为了纠正可能出现的步骤数错误）
   4. 文字类描述接受的字符有（,，.。）这4种，主料和调料的只能接收10以内的字符，状态能接收20以内的字符。
   5. 重量描述只能接收整数
   6. 状态信息中记得确保状态选择正确（比如焖煮和保温过程，会影响UI界面的显示）
   7. 如果步骤数写多了，记得在回退之前将多余步骤中的内容手动清空
3. 引导界面点击`next`按钮会在当前文件夹`menu`中生成“menu+ID”的bin文件。
   

## 菜谱查看以及修改流程
说明：菜谱查看功能主要是为了修改菜谱中某个单独的属性，省去重新输入的功能。
1. 点击`查看菜谱`按钮
2. 选中之前生成的菜谱文件
3. 修改第二列的内容才有效
4. 点击`文件`菜单中的`另存为一个new后缀的新文件`会在`menu`文件夹中生成"menu+ID+new"的bin文件

## 菜谱上传流程

说明：菜谱上传工程是为了方便测试单个菜谱而设计的，智能锅运行过程中可以上传一道菜谱，并在创造模式中打开运行，如果智能锅掉电则会丢失数据，需要重新上传。

上传流程存在两种情况：

1. 第一次连接，智能锅的蓝牙模块没有进入接收菜谱模式，需要搜索蓝牙并连接控制智能锅进入菜谱接收模式。
2. 智能锅已经和蓝牙连接并且进入菜谱接收模式，可以打开串口之后直接上传菜谱。



首先是第一种流程：

1. 插入蓝牙USB模块，打开电脑的设备管理器，在`端口（COM和LPT）`中找到名称为`USB-SERIAL CH340`的端口，记住COM口号

2. 打开`上传菜谱`按钮

3. 在第一栏的下拉菜单中选择刚才记住的COM号，点击打开串口，成功的话会在下面看到"打开成功"

4. 点击`搜索蓝牙`按钮，会在旁边的下拉菜单中看到周围的蓝牙设备，找到智能锅的并点击`连接选中蓝牙`按钮

5. 此时智能锅进入透传模式，并且会持续接收到智能锅的状态信息

6. 点击`选择菜谱`选择要上传的菜谱文件，再点击`上传菜谱`。下面状态栏最后会显示"传输完成的字样"

7. 此时智能锅的创作模型已经可以进入并运行刚刚上传的菜谱

接下来是第二种流程：
1. 选中蓝牙模块的com口并打开串口
2. 选择要上传的菜谱文件并上传菜谱

（Ps：整个运行过程中不可以拔掉usb蓝牙模块，意外拔掉会导致程序卡死，需要重新打开并重复第一种流程）

## 后记

文档撰写时间：2020年9月10日

作者：吴任迪(minos.wu@tineco.com)